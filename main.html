<!doctype html>
<html>
	<head>
	
		<title>Hierarchy visualiser</title>

		<style type="text/css">
			html, body {
			font: 11pt arial;
			}

			h1 {
			    font-size: 150%;
			    margin: 5px 0;
			}

			h2 {
			    font-size: 100%;
			    margin: 5px 0;
			}

			table.view {
			    width: 100%;
			}

			table td {
			    vertical-align: top;
			}

			table table {
			    background-color: #f5f5f5;
			    border: 1px solid #e5e5e5;
			}

			table table td {
			    vertical-align: middle;
			}

			input[type=text], pre {
			    border: 1px solid lightgray;
			}

			pre {
			    margin: 0;
			    padding: 5px;
			    font-size: 10pt;
			}

			#network {
			    width: 100%;
			    height: 400px;
			    border: 1px solid lightgray;
			}
		</style>

		<script type="text/javascript" src="http://visjs.org/dist/vis.js"></script>
		<script type="text/javascript" src="http://visjs.org/dist/exampleUtils.js"></script>
		<link href="http://visjs.org/dist/vis.css" rel="stylesheet" type="text/css" />

		<script type="text/javascript">
			var nodes, edges, network;


			function toJSON(obj) 
			{
				return JSON.stringify(obj, null, 4);
			}

			function addNodeFromInput() 
			{
				try 
				{
					nodes.add(
					{
						id: document.getElementById('node-id').value,
						label: document.getElementById('node-label').value,
						level: document.getElementById('node-level').value,
						shape: 'dot',
						color: {background:'white', border:'black'} ,
						font: {background: 'white'}
					});
				}
				catch (err) 
				{
					alert(err);
				}
			}
		
			function addNode(idIn, labelIn, levelIn) 
			{
				try
				{
					nodes.add(
					{
						id: idIn,
						label: labelIn,
						level: levelIn,
						shape: 'dot',  
						color: {background:'white', border:'black'},
						font: {background: 'white'}						
					});
				}
				catch (err) 
				{
					alert(err);
				}
			}

			function updateNodeFromInput() 
			{
				try 
				{
					nodes.update({
						id: document.getElementById('node-id').value,
						label: document.getElementById('node-label').value});
				}
				catch (err)
				{
					alert(err);
				}
			}
		
			function updateNode(idIn, labelIn) 
			{
				try {
					nodes.update({
					    id: idIn,
					    label: labelIn
					});
				}
				catch (err)
				{
					alert(err);
				}
			}

		
			function removeNodeFromInput() 
			{
				try 
				{
					nodes.remove({id: document.getElementById('node-id').value});
				}
				catch (err)
				{
					alert(err);
				}
			}
			
			function removeNode(idIn) 
			{
				try 
				{
					nodes.remove({id: idIn});
				}
				catch (err) 
				{
					alert(err);
				}
			}

			function addEdgeFromInput()
			{
				try 
				{
					edges.add({
						id: document.getElementById('edge-id').value,
						from: document.getElementById('edge-from').value,
						to: document.getElementById('edge-to').value
						});
				}
				catch (err) 
				{
					alert(err);
				}
			}
			
			function addEdge(idIn, fromIn, toIn)
			{
				try 
				{
					edges.add({
						id: idIn,
						from: fromIn,
						to: toIn,
						});
				}
				catch (err) 
				{
					alert(err);
				}
			}
		
			function updateEdgeFromInput()
			{
				try 
				{
					edges.update({
						id: document.getElementById('edge-id').value,
						from: document.getElementById('edge-from').value,
						to: document.getElementById('edge-to').value
					});
				}
				catch (err) 
				{
					alert(err);
				}
			}
			
			function updateEdge(idIn, fromIn, inTo)
			{
				try 
				{
					edges.update({
						id: idIn,
						from: fromIn,
						to: inTo
					});
				}
				catch (err) 
				{
					alert(err);
				}
			}
			
			
			function removeEdgeFromInput() 
			{
				try 
				{
					edges.remove({id: document.getElementById('edge-id').value});
				}
				catch (err) 
				{
					alert(err);
				}
			}
			
			function removeEdge(idIn)
			{
				try 
				{
					edges.remove({id: idIn});
				}
				catch (err)
				{
					alert(err);
				}
			}

			function draw() 
			{
				nodes = new vis.DataSet();
				nodes.on('*', function () 
				{
					document.getElementById('nodes').innerHTML = JSON.stringify(nodes.get(), null, 4);
				});
				
				nodes.add([
					{id: '1', label: 'Node 1', level: '1' , shape: 'dot',  color: {background:'white', border:'black'} ,font: {background: 'white'}},
					{id: '2', label: 'Node 2', level: '1', shape: 'dot',  color: {background:'white', border:'black'} ,font: {background: 'white'}},
					{id: '3', label: 'Node 3', level: '2', shape: 'dot',  color: {background:'white', border:'black'} ,font: {background: 'white'}},
					{id: '4', label: 'Node 4', level: '2', shape: 'dot',  color: {background:'white', border:'black'} ,font: {background: 'white'}},
					{id: '5', label: 'Node 5', level: '3', shape: 'dot',  color: {background:'white', border:'black'} ,font: {background: 'white'}}
				]);

				edges = new vis.DataSet();
				edges.on('*', function () 
				{
					document.getElementById('edges').innerHTML = JSON.stringify(edges.get(), null, 4);
				});
				
				edges.add([
					{id: '1', from: '1', to: '2'},
					{id: '2', from: '1', to: '3'},
					{id: '3', from: '2', to: '4'},
					{id: '4', from: '2', to: '5'}
				]);

				
				var options = 
				{
					interaction: { navigationButtons: true,  keyboard: true},
					layout: {hierarchical: {direction: 'UD'}}, 
					nodes: {borderWidth: 2}, 
					edges: {width: 2},
					physics: {enabled: false},
				};
				
				var data = 
				{
					nodes: nodes,
					edges: edges
				};
				
				var container = document.getElementById('network');
				network = new vis.Network(container, data, options);
			}
		</script>
		<script src="../../googleAnalytics.js"></script>
	</head>

<body onload="draw();">
<h1>Adjust</h1>
<table>
    <tr>
        <td>
            <h2>Node</h2>
            <table>
                <tr>
                    <td></td>
                    <td><label for="node-id">Id</label></td>
                    <td><input id="node-id" type="text" value="6"></td>
                </tr>
                <tr>
                    <td></td>
                    <td><label for="node-label">Label</label></td>
                    <td><input id="node-label" type="text" value="Node 6"></td>
                </tr>
		<tr>
                    <td></td>
                    <td><label for="node-level">Level</label></td>
                    <td><input id="node-level" type="text" value="Node 6"></td>
                </tr>
                <tr>
                    <td></td>
                    <td>Action</td>
                    <td>
                        <button id="node-add" onclick="addNodeFromInput() ;">Add</button>
                        <button id="node-update" onclick="updateNodeFromInput() ;">Update</button>
                        <button id="node-remove" onclick="removeNodeFromInput() ;">Remove</button>
                    </td>
                </tr>
            </table>
        </td>
        <td>
            <h2>Edge</h2>
            <table>
                <tr>
                    <td></td>
                    <td><label for="edge-id">Id</label></td>
                    <td><input id="edge-id" type="text" value="5"></td>
                </tr>
                <tr>
                    <td></td>
                    <td><label for="edge-from">From</label></td>
                    <td><input id="edge-from" type="text" value="3"></td>
                </tr>
                <tr>
                    <td></td>
                    <td><label for="edge-to">To</label></td>
                    <td><input id="edge-to" type="text" value="4"></td>
                </tr>
                <tr>
                    <td></td>
                    <td>Action</td>
                    <td>
                        <button id="edge-add" onclick="addEdgeFromInput();">Add</button>
                        <button id="edge-update" onclick="updateEdgeFromInput();">Update</button>
                        <button id="edge-remove" onclick="removeEdgeFromInput();">Remove</button>
                    </td>
                </tr>
            </table>
        </td>
    </tr>

</table>

<h1>View</h1>
<table class="view">
    <colgroup>
        <col width="25%">
        <col width="25%">
        <col width="50%">
    </colgroup>
    <tr>
        <td>
            <h2>Nodes</h2>
            <pre id="nodes"></pre>
        </td>

        <td>
            <h2>Edges</h2>
            <pre id="edges"></pre>
        </td>

        <td>
            <h2>Network</h2>

            <div id="network"></div>
        </td>
    </tr>
</table>

</body>
</html>
